From 384ec135ad9ecf254e293a0ccc9711b49882904f Mon Sep 17 00:00:00 2001
From: David Shorthouse <davidpshorthouse@gmail.com>
Date: Thu, 19 Nov 2015 09:52:25 -0500
Subject: [PATCH] Complete theming to match existing Canadensys theme

---
 WEB-INF/pages/admin/organisations.ftl           |   2 +-
 WEB-INF/pages/admin/users.ftl                   |   2 +-
 WEB-INF/pages/inc/footer.ftl                    |  43 ++--
 WEB-INF/pages/inc/header.ftl                    |  11 +-
 WEB-INF/pages/inc/header_setup.ftl              |   4 +-
 WEB-INF/pages/inc/menu.ftl                      | 156 +++++++------
 WEB-INF/pages/macros/resourcesTable.ftl         |   9 +-
 WEB-INF/pages/macros/versionsTable.ftl          |   2 +-
 WEB-INF/pages/manage/home.ftl                   |   2 +-
 WEB-INF/pages/manage/mapping.ftl                |   2 +-
 WEB-INF/pages/manage/overview.ftl               |   3 +-
 WEB-INF/pages/portal/home.ftl                   |   7 +-
 WEB-INF/pages/portal/resource_new.ftl           | 132 ++---------
 images/dataTables/forward_enabled_hover_red.png | Bin 0 -> 585 bytes
 images/dataTables/sort_asc_red.png              | Bin 0 -> 266 bytes
 images/dataTables/sort_desc_red.png             | Bin 0 -> 273 bytes
 js/custom.js                                    |  18 ++
 styles/custom.css                               | 297 ++++++++++++++++++++++--
 styles/main.css                                 |  13 --
 19 files changed, 446 insertions(+), 257 deletions(-)
 create mode 100644 images/dataTables/forward_enabled_hover_red.png
 create mode 100644 images/dataTables/sort_asc_red.png
 create mode 100644 images/dataTables/sort_desc_red.png
 create mode 100644 js/custom.js

diff --git a/WEB-INF/pages/admin/organisations.ftl b/WEB-INF/pages/admin/organisations.ftl
index 5e89c77..333cc57 100644
--- a/WEB-INF/pages/admin/organisations.ftl
+++ b/WEB-INF/pages/admin/organisations.ftl
@@ -28,7 +28,7 @@ $(document).ready(function(){
 
 <h1 class="rtableTitle"><@s.text name="admin.home.editOrganisations"/></h1>
 
-<@organisationsTable numOrganisationsShown=20 sEmptyTable="dataTables.sEmptyTable.organisations" columnToSortOn=0 sortOrder="asc" />
+<@organisationsTable numOrganisationsShown=999 sEmptyTable="dataTables.sEmptyTable.organisations" columnToSortOn=0 sortOrder="asc" />
 <div id="tableContainer"></div>
 
 <div class="grid_24">
diff --git a/WEB-INF/pages/admin/users.ftl b/WEB-INF/pages/admin/users.ftl
index 9947ede..81c74e6 100644
--- a/WEB-INF/pages/admin/users.ftl
+++ b/WEB-INF/pages/admin/users.ftl
@@ -19,7 +19,7 @@ $(document).ready(function(){
 
 <h1 class="rtableTitle"><@s.text name="admin.home.manageUsers"/></h1>
 
-<@usersTable numUsersShown=20 sEmptyTable="dataTables.sEmptyTable.users" columnToSortOn=0 sortOrder="asc" />
+<@usersTable numUsersShown=999 sEmptyTable="dataTables.sEmptyTable.users" columnToSortOn=0 sortOrder="asc" />
 <div id="tableContainer"></div>
 
 <div class="grid_24">
diff --git a/WEB-INF/pages/inc/footer.ftl b/WEB-INF/pages/inc/footer.ftl
index ea1ce94..13e1bb2 100644
--- a/WEB-INF/pages/inc/footer.ftl
+++ b/WEB-INF/pages/inc/footer.ftl
@@ -2,27 +2,28 @@
 			</div>
 			</section>
 			<footer id="section-footer" class="section section-footer">
-  			<div id="zone-footer-wrapper" class="zone-wrapper zone-footer-wrapper clearfix">  
-      		<div id="zone-footer" class="zone zone-footer clearfix container_24">
-      			<ul>
-			        <li>IPT <@s.text name="footer.version"/> ${cfg.version!"???"}</li>
-			        <li><a href="http://www.gbif.org/ipt"><@s.text name="footer.projectHome"/></a></li>
-			        <li><a href="http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes" target="_blank"><@s.text name="footer.useManual"/></a></li>
-			        <li><a href="https://github.com/gbif/ipt/issues/new" target="_blank"><@s.text name="footer.bugReport"/></a></li>
-			        <li><a href="https://github.com/gbif/ipt/issues/new" target="_blank"><@s.text name="footer.featureRequest"/></a></li>
-		        </ul>
-      		</div>
-  			</div>
-
-  			<div id="zone-credit-wrapper" class="zone-wrapper zone-footer-wrapper clearfix">
-          <div id="zone-credit" class="zone zone-credit clearfix container_24">
-            <aside class="grid_16 region region-credit-first" id="region-credit-first">
-              <div class="region-inner region-credit-first-inner">
-                <p>&copy;2015 <a href="http://www.gbif.org">Global Biodiversity Information Facility</a>.</p>
-              </div>
-            </aside>
-          </div>
-  			</div>
+<!-- Custom footer START -->
+<div id="footer" class="zone-wrapper zone-footer-wrapper clearfix">  
+	<div id="footer_content" class="zone zone-footer clearfix container_24">
+	<div class="footer_section left">
+		<a id="cc0" class="cc_logo" href="http://creativecommons.org/publicdomain/zero/1.0/" title="CC0 1.0 Universal Public Domain Dedication">&nbsp;</a>
+		<p>Most Canadensys participants have dedicated their data to the <a href="http://creativecommons.org/publicdomain/zero/1.0/">public domain</a>.</p>
+		<ul>
+			<li><a href="http://www.canadensys.net/norms">Data usage norms</a></li>
+			<li>Powered by <a href="http://code.google.com/p/gbif-providertoolkit/">IPT ${cfg.version!"???"}</a> &copy; <a href="http://www.gbif.org">GBIF</a></li>
+		</ul>
+	</div>
+	<div class="footer_section right">
+		<a rel="license" id="cc_by" class="cc_logo" href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons Attribution 3.0 Unported">&nbsp;</a>
+		<p>All other content on this website is licensed under <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">CC-BY</a>, except for the copyrighted <a href="http://www.canadensys.net/documents">Canadensys logo</a>.</p>
+		<ul>
+			<li><a href="http://www.canadensys.net/about">About Canadensys</a></li>
+			<li><a href="http://www.canadensys.net/contact">Contact us</a></li>
+		</ul>
+	</div>
+	</div>
+</div>
+<!-- Custom footer END -->
 			</footer>		
 		</div>
 
diff --git a/WEB-INF/pages/inc/header.ftl b/WEB-INF/pages/inc/header.ftl
index 35011bb..019ad19 100644
--- a/WEB-INF/pages/inc/header.ftl
+++ b/WEB-INF/pages/inc/header.ftl
@@ -14,16 +14,18 @@
 	<link rel="stylesheet" type="text/css" media="all" href="${baseURL}/styles/960_24_col.css" />
  	<link rel="stylesheet" type="text/css" href="${baseURL}/styles/main.css" />
   <link rel="stylesheet" type="text/css" media="all" href="${baseURL}/styles/jquery/dataTable.css"/>
- 	<link rel="shortcut icon" href="${baseURL}/images/icons/favicon-16x16.png" type="image/x-icon" />
 	<link href="${baseURL}/rss.do" title="Latest Resources" rel="alternate" type="application/rss+xml" />
   <link media="all" type="text/css" href="${baseURL}/styles/jquery/jquery-ui.min-1.11.0.css" rel="stylesheet" />
   <!-- for css overrides needed for customizations -->
-  <link rel="stylesheet" type="text/css" href="${baseURL}/styles/custom.css" />
+  <link rel="stylesheet" type="text/css" media="all" href="http://data.canadensys.net/common/styles/common.css"/>
+  <link rel="stylesheet" type="text/css" media="all" href="${baseURL}/styles/custom.css" />
+  <link rel="shortcut icon" href="http://data.canadensys.net/common/images/favicon.png" type="image/x-icon" />
   <!-- for support of old browsers, like IE8. See http://modernizr.com/docs/#html5inie -->
   <script type="text/javascript" src="${baseURL}/js/modernizr.js"></script>
   <script type="text/javascript" src="${baseURL}/js/jquery/jquery-1.11.1.min.js"></script>
   <script type="text/javascript" src="${baseURL}/js/jquery/jquery-ui.min-1.11.0.js"></script>
 	<script type="text/javascript" src="${baseURL}/js/global.js"></script>
+	<script type="text/javascript" src="${baseURL}/js/custom.js"></script>
 
 [#-- GOOGLE ANALYTICS - asynchroneous: http://code.google.com/apis/analytics/docs/tracking/asyncTracking.html --]
 [#if cfg.gbifAnalytics || (cfg.analyticsKey!"")?length>1] 
@@ -46,7 +48,7 @@
 [/#if]
 
     [#-- Metadata used by browsers (title in browser toolbar, bookmark when added to favorites), search engines (keywords) --]
-    [#assign metaKeywords = "GBIF, Global Biodiversity Information Facility, IPT, Integrated Publishing Toolkit, checklist, occurrence, metadata, DwC-A, Darwin Core, Darwin Core Archive, biodiversity data, data paper, EML" /]
+    [#assign metaKeywords = "Canadensys, integrated publishing toolkit, IPT, repository, checklist, occurrence, specimen" /]
     [#assign registeredIpt = action.getRegisteredIpt()!""/]
     [#if resource?? && eml??]
       <meta name="description" content="${eml.description!}" charset="UTF-8" />
@@ -59,7 +61,7 @@
       <meta name="description" content="${registeredIpt.description!}" charset="UTF-8" />
       <meta name="keywords" content="${metaKeywords}" charset="UTF-8" />
     [#else]
-      <meta name="description" content="The Integrated Publishing Toolkit (IPT) is a tool developed by the Global Biodiversity Information Facility (GBIF) to provide an easy and efficient way of publishing biodiversity data." charset="UTF-8"}" />
+      <meta name="description" content="Canadensys biodiversity data repository for specimens and checklists" charset="UTF-8"}" />
       <meta name="keywords" content="${metaKeywords}" charset="UTF-8" />
     [/#if]
     <meta name="generator" content="IPT ${cfg.version!}" />
@@ -71,6 +73,7 @@ $(document).ready(function(){
 [#-- see global.js for function defs --]
     initForm();
 	initMenu();
+	custom_langs("${localeLanguage}","${baseURL}");
 });
 </script>
 
diff --git a/WEB-INF/pages/inc/header_setup.ftl b/WEB-INF/pages/inc/header_setup.ftl
index 323745f..b1d3a85 100644
--- a/WEB-INF/pages/inc/header_setup.ftl
+++ b/WEB-INF/pages/inc/header_setup.ftl
@@ -8,13 +8,15 @@
 		<link rel="stylesheet" type="text/css" media="all" href="${baseURL}/styles/text.css" />
 		<link rel="stylesheet" type="text/css" media="all" href="${baseURL}/styles/960_24_col.css" />
  		<link rel="stylesheet" type="text/css" href="${baseURL}/styles/main.css"/>
- 		<link rel="shortcut icon" href="${baseURL}/images/icons/favicon-16x16.png" type="image/x-icon" />
+ 		<link rel="shortcut icon" href="http://data.canadensys.net/common/images/favicon.png" type="image/x-icon" />
     <!-- for css overrides needed for customizations -->
+    <link rel="stylesheet" type="text/css" media="all" href="http://data.canadensys.net/common/styles/common.css"/>
     <link rel="stylesheet" type="text/css" href="${baseURL}/styles/custom.css" />
     <!-- for support of old browsers, like IE8. See http://modernizr.com/docs/#html5inie -->
     <script type="text/javascript" src="${baseURL}/js/modernizr.js"></script>
     <script type="text/javascript" src="${baseURL}/js/jquery/jquery-1.11.1.min.js"></script>
     <script type="text/javascript" src="${baseURL}/js/global.js"></script>
+    <script type="text/javascript" src="${baseURL}/js/custom.js"></script>
 		<style>
       h1 {
       	color: #077A2D;
diff --git a/WEB-INF/pages/inc/menu.ftl b/WEB-INF/pages/inc/menu.ftl
index a99b0a6..37d4642 100644
--- a/WEB-INF/pages/inc/menu.ftl
+++ b/WEB-INF/pages/inc/menu.ftl
@@ -1,79 +1,57 @@
 [#ftl]
-<script type="text/javascript">
-	$(document).ready(function(){
-  		langs("${localeLanguage}","${baseURL}");
-	});
-</script>
 </head>
  	<body>
+ 	<div id="feedback_bar"><a href="https://github.com/Canadensys/ipt-issues/issues" title="[#if localeLanguage=='fr']Signaler un problème[#else]Report a problem[/#if]">&nbsp;</a></div>
 		<div class="page clearfix" id="page">
 			<header id="section-header" class="section section-header">
-        <div id="zone-user-wrapper" class="zone-wrapper zone-user-wrapper clearfix">
-          <div id="zone-user" class="zone zone-user clearfix container_24">
-            <div class="region-inner region-branding-inner">
-              <div class="branding-data clearfix">
-                <div class="logo-img">
-                  <a href="${baseURL}" rel="home" title="GBIF Logo" class="active">
-                    <img src="${baseURL}/images/GBIF-2015-standard-ipt.png" />
-                  </a>
-                </div>
-                <hgroup class="site-name-slogan">
-                  <h1 class="site-name"><a href="${baseURL}" rel="home" title="Home" class="active">Integrated Publishing Toolkit</a><span class="logoSuperscript">(IPT)</span></h1>
-                  <h6 class="site-slogan">free and open access to biodiversity data</h6>
-                  [#if !cfg.devMode() && cfg.getRegistryType()=='PRODUCTION']
-                  [#else]
-                    <img class="testmode" src="${baseURL}/styles/testmode.png" />
-                  [/#if]
-                </hgroup>
-                <div id="region-user-second" class="region-inner region-user-second-inner">
-                  <ul id="language-menu">
-                    [#if (Session.curr_user)??]
-                      <li>[@s.text name="menu.loggedin"][@s.param]${Session.curr_user.email}[/@s.param][/@s.text]</li>
-                      <li[#if currentMenu=="account"] class="current"[/#if] ><a href="${baseURL}/account.do">[@s.text name="menu.account"/]</a></li>
-                      <li[#if currentMenu=="logout"] class="current"[/#if]><a href="${baseURL}/logout.do">[@s.text name="menu.logout"/]</a></li>
-                    [#else]
-                      <li>
-                        <form id="login-form" action="${baseURL}/login.do" method="post">
-                          <input type="text" size="25" name="email" value="email" class="form-reset" />
-                          <input type="password" size="20" name="password" value="password" class="form-reset" />
-                          [@s.submit key="portal.login" name="login-submit"/]
-                        </form>
-                      </li>
-                    [/#if]
-                    <li>
-                      <a href="#"><img src="${baseURL}/images/flags/flag_${localeLanguage}.png"/></a>
-                      <ul id="languages">
-                        <!-- add more languages as translations become available. -->
-                        <!-- To see more information go to langs method in global.js -->
-                      </ul>
-                    </li>
-                  </ul>
-                </div>
-              </div>
-            </div>
-          </div>
-        </div>
-        <!-- show production logo only if ipt 1) .war was not built in test mode and 2) run in production mode -->
-        <div id="zone-branding-wrapper" class="zone-wrapper zone-branding-wrapper clearfix">
-          <div id="zone-branding" class="zone zone-branding clearfix container_24">
-      		  <div class="grid_13 region region-menu" id="region-menu">
-              <nav>
-      	        <ul>
-      		    	  <li[#if currentMenu=='home'] class="current"[/#if]><a href="${baseURL}/">[@s.text name="menu.home"/]</a></li>
-      		    	  [#if managerRights]
-      		    	    <li[#if currentMenu=='manage'] class="current"[/#if]><a href="${baseURL}/manage/">[@s.text name="menu.manage"/]</a></li>
-      		    	  [/#if]
-      		    	  [#if adminRights]
-      		    	    <li[#if currentMenu=='admin'] class="current"[/#if]><a href="${baseURL}/admin/">[@s.text name="menu.admin"/]</a></li>
-      		    	  [/#if]
-      		    	  <li[#if currentMenu=='about'] class="current"[/#if]><a href="${baseURL}/about.do">[@s.text name="menu.about"/]</a></li>
-      	        </ul>
-      	      </nav>
-      	    </div>
-      	  </div>
-      		<div id="search"></div>
-        </div>
-		  </header>
+      			<div id="header">
+      				<div id="header_content">
+      					<div id="nav_top">
+      						[#if (Session.curr_user)??]
+      							[@s.text name="menu.loggedin"][@s.param]<em>${Session.curr_user.email}</em>[/@s.param][/@s.text] | <a href="${baseURL}/account.do">[@s.text name="menu.account"/]</a> | <a href="${baseURL}/logout.do">[@s.text name="menu.logout"/]</a>
+      						[#else]
+      							<form id="login-form" action="${baseURL}/login.do" method="post">
+      								<input type="text" size="25" name="email" value="email" class="form-reset" />
+      								<input type="password" size="20" name="password" value="password" class="form-reset" />
+      								[@s.submit key="portal.login" name="login-submit"/]
+      							</form>
+      					  	[/#if]
+      					</div>				
+      					<div id="nav_title"><a href="http://data.canadensys.net/[#if localeLanguage=='fr']?lang=fr[/#if]">Canadensys</a></div>
+      					<div id="nav_portal"><span class="selected">[#if localeLanguage=='fr']Données[#else]Data[/#if]</span> | <a href="http://www.canadensys.net/[#if localeLanguage=='fr']?lang=fr[/#if]">[#if localeLanguage=='fr']Communauté[#else]Community[/#if]</a></div>
+      				</div>
+      				<div id="menu">		
+      					<ul>
+      						<li class="menu_first">&nbsp;</li>
+      						[#if !managerRights]
+      						<li><a href="http://data.canadensys.net/explorer/[#if localeLanguage=='fr']?lang=fr[/#if]">[#if localeLanguage=='fr']Explorateur[#else]Explorer[/#if]</a></li>
+      						[/#if]
+      						<li[#if currentMenu=='home'] class="current"[/#if]><a href="${baseURL}/">[#if localeLanguage=='fr']Dépôt[#else]Repository[/#if][#--[@s.text name="menu.home"/]--]</a></li>
+      						[#if managerRights]
+      						<li[#if currentMenu=='manage'] class="current"[/#if]><a href="${baseURL}/manage/">[@s.text name="menu.manage"/]</a></li>
+      						[/#if]
+      						[#if adminRights]
+      						<li[#if currentMenu=='admin'] class="current"[/#if]><a href="${baseURL}/admin/">[@s.text name="menu.admin"/]</a></li>
+      						[/#if]
+      						[#if !managerRights]
+      						<li><a href="http://data.canadensys.net/tools/[#if localeLanguage=='fr']?lang=fr[/#if]">Tools</a></li>
+      						<li><a href="http://data.canadensys.net/vascan/[#if localeLanguage=='fr']?lang=fr[/#if]">Vascan</a></li>
+      						[/#if]
+      						<li class="menu_last">&nbsp;</li>
+      					</ul>  
+      				</div>
+      			</div>
+      
+      			[#--<div id="search">
+      				<form action="${baseURL}/search" method="get">
+      					<div>
+      						<input type="text" name="q" id="search-input" [#if !q??] class="form-reset" value='search ${searchText!" resources"}'[#else] value='${q}'[/#if] />
+      						<input class="default" type="submit" value="Search" id="search-submit" />
+      					</div>
+      				</form>
+      			</div>--]
+      
+      		  </header>
 		  <section id="section-content" class="section section-content">
         <div id="zone-content-wrapper" class="zone-wrapper zone-content-wrapper clearfix">
           <div id="zone-content" class="zone zone-content clearfix container_24">
@@ -83,7 +61,7 @@
 			<aside class="grid_6 push_18">
 			<div class="clearfix" id="sidebar">
 				<h2>[@s.text name='manage.metadata.section' /]</h2>
-				<ul class="sidebar">
+				<ul class="sidebar round">
 				[#list ["basic", "geocoverage", "taxcoverage","tempcoverage", "keywords", "parties", "project", "methods", "citations", "collections", "physical", "additional"] as it]
 				 <li[#if currentSideMenu?? && currentSideMenu==it] class="current"[#else] class="sidebar"[/#if]><a href="metadata-${it}.do?r=${resource.shortname!r!}">[@s.text name="submenu.${it}"/]</a></li>
 				[/#list]
@@ -93,6 +71,40 @@
 
 			<div class="grid_18 pull_6 region region-content" id="region-content">
 
+      [#elseif sideMenuResource!false]
+      
+      <div id="side_bar">
+      [#if resource.lastPublished??]
+      	[#if (resource.recordsPublished>0)]
+      	<p><a class="round big_button no_margin" id="dwc_archive" href="${baseURL}/archive.do?r=${resource.shortname}" onClick="_gaq.push(['_trackEvent', 'Archive', 'Download', '${resource.shortname}']);">[#if localeLanguage=='fr']Télécharger données[#else]Download dataset[/#if]</a></p>
+      	[/#if]
+      	<p><a class="round big_button multi_line" id="eml_file" href="${baseURL}/eml.do?r=${resource.shortname}" onClick="_gaq.push(['_trackEvent', 'EML', 'Download', '${resource.shortname}']);">[#if localeLanguage=='fr']Télécharger metadonnées en format EML[#else]Download metadata as an EML file[/#if]</a></p>
+      	[#if rtfFileExisting]
+      	<p><a class="round big_button multi_line" id="rtf_file" href="${baseURL}/rtf.do?r=${resource.shortname}" onClick="_gaq.push(['_trackEvent', 'RTF', 'Download', '${resource.shortname}']);">[#if localeLanguage=='fr']Télécharger metadonnées en format RTF[#else]Download metadata as an RTF file[/#if]</a></p>
+      	[/#if]
+      		[#if eml.physicalData?has_content]
+      			[#list eml.physicalData as item]
+      			[#if item.distributionUrl?starts_with('http://data.canadensys.net/explorer/')]
+      			<p><a class="round big_button[#if localeLanguage=='en'] multi_line[/#if]" id="explorer_link" href="${item.distributionUrl}" target="_blank" onClick="_gaq.push(['_trackEvent', 'Canadensys explorer', 'Outbound link', '${resource.shortname}']);">[#if localeLanguage=='fr']Voir données sur Canadensys[#else]Explore this dataset on Canadensys[/#if]</a></p>
+      			[/#if]
+      			[/#list]
+      			[#list eml.physicalData as item]
+      			[#if item.distributionUrl?starts_with('http://www.gbif.org/dataset/')]
+      			<p><a class="round big_button" id="gbif_link" href="${item.distributionUrl}" target="_blank" onClick="_gaq.push(['_trackEvent', 'GBIF data portal', 'Outbound link', '${resource.shortname}']);">[#if localeLanguage=='fr']Voir données sur GBIF[#else]Explore this dataset on GBIF[/#if]</a></p>
+      			[/#if]
+      			[/#list]
+      		[/#if]
+      		[#if eml.citation.identifier?has_content]
+      		[#assign doi = eml.citation.identifier?matches(r".*(10[.][0-9]{4,}(?:[.][0-9]+)*/\S+)")]
+      			[#if doi]
+      			<p><span class="doi"><a href="http://doi.org/${doi?groups[1]}">doi:${doi?groups[1]}</a></p>
+      			[/#if]
+      		[/#if]
+      [/#if]
+      </div>
+      
+      			<div class="grid_18 region region-content" id="region-content">
+
 [#else]
 
 			<div class="grid_24 region region-content" id="region-content">
diff --git a/WEB-INF/pages/macros/resourcesTable.ftl b/WEB-INF/pages/macros/resourcesTable.ftl
index 5968ddd..441bded 100644
--- a/WEB-INF/pages/macros/resourcesTable.ftl
+++ b/WEB-INF/pages/macros/resourcesTable.ftl
@@ -8,7 +8,7 @@ resourcesTable macro: Generates a data table that has searching, pagination, and
 -->
 <#macro resourcesTable shownPublicly numResourcesShown sEmptyTable columnToSortOn sortOrder>
 
-<script type="text/javascript" charset="utf-8">
+<script type="text/javascript">
     <#assign emptyString="--">
     <#assign dotDot="..">
     <#assign deletedString><@s.text name="manage.home.visible.deleted"/></#assign>
@@ -42,10 +42,9 @@ resourcesTable macro: Generates a data table that has searching, pagination, and
            <#if r.status=='REGISTERED'>'${r.organisation.alias?replace("\'", "\\'")?replace("\"", '\\"')!r.organisation.name?replace("\'", "\\'")?replace("\"", '\\"')}'<#else>'<@s.text name="manage.home.not.registered"/>'</#if>,
            <#if r.coreType?has_content && types[r.coreType?lower_case]?has_content>'${types[r.coreType?lower_case]?replace("\'", "\\'")?replace("\"", '\\"')?cap_first!}'<#else>'${emptyString}'</#if>,
            <#if r.subtype?has_content && datasetSubtypes[r.subtype?lower_case]?has_content >'${datasetSubtypes[r.subtype?lower_case]?replace("\'", "\\'")?replace("\"", '\\"')?cap_first!}'<#else>'${emptyString}'</#if>,
-           '${r.recordsPublished!0}',
+           '${r.recordsPublished?c!0}',
            '${r.modified?date}',
            <#if r.published>'${(r.lastPublished?date)!}'<#else>'<@s.text name="portal.home.not.published"/>'</#if>,
-           '${(r.nextPublished?date?string("yyyy-MM-dd HH:mm:ss"))!'${emptyString}'}',
            <#if r.status=='PRIVATE'>'<@s.text name="manage.home.visible.private"/>'<#elseif r.status=='DELETED'>'${deletedString}'<#else>'<@s.text name="manage.home.visible.public"/>'</#if>,
            <#if r.creator??>'${r.creator.firstname?replace("\'", "\\'")?replace("\"", '\\"')!} ${r.creator.lastname?replace("\'", "\\'")?replace("\"", '\\"')!}'<#else>'${emptyString}'</#if>]<#if r_has_next>,</#if>
       </#list>
@@ -57,6 +56,7 @@ resourcesTable macro: Generates a data table that has searching, pagination, and
             "aaData": aDataSet,
             "iDisplayLength": ${numResourcesShown},
             "bLengthChange": false,
+            "bPaginate": false,
             "bAutoWidth": false,
             "oLanguage": {
                 "sEmptyTable": "<@s.text name="${sEmptyTable}"/>",
@@ -78,9 +78,8 @@ resourcesTable macro: Generates a data table that has searching, pagination, and
                 { "sTitle": "<@s.text name="manage.home.type"/>"},
                 { "sTitle": "<@s.text name="manage.home.subtype"/>"},
                 { "sTitle": "<@s.text name="portal.home.records"/>", "bSearchable": false, "sType": "number"},
-                { "sTitle": "<@s.text name="manage.home.last.modified"/>", "bSearchable": false},
+                { "sTitle": "<@s.text name="manage.home.last.modified"/>", "bSearchable": false, "bVisible": <#if shownPublicly>false<#else>true</#if>},
                 { "sTitle": "<@s.text name="manage.home.last.publication" />", "bSearchable": false},
-                { "sTitle": "<@s.text name="manage.home.next.publication" />", "bSearchable": false},
                 { "sTitle": "<@s.text name="manage.home.visible"/>", "bSearchable": false, "bVisible": <#if shownPublicly>false<#else>true</#if>},
                 { "sTitle": "<@s.text name="portal.home.author"/>", "bVisible": <#if shownPublicly>false<#else>true</#if>}
             ],
diff --git a/WEB-INF/pages/macros/versionsTable.ftl b/WEB-INF/pages/macros/versionsTable.ftl
index ed96e1a..3ed1757 100644
--- a/WEB-INF/pages/macros/versionsTable.ftl
+++ b/WEB-INF/pages/macros/versionsTable.ftl
@@ -15,7 +15,7 @@ versionsTable macro: Generates a data table that has pagination.
       <#list resource.getVersionHistory() as v>
           /* only show public versions, unless user has manager rights in which case they can see all versions */
           <#if (v.publicationStatus == 'PUBLIC' || v.publicationStatus == 'REGISTERED') || managerRights>
-              [<#if (version?? && v.version == version.toPlainString()) || (!version?? && v.version == resource.emlVersion.toPlainString())>'<img class="latestVersion" src="${baseURL}/images/dataTables/forward_enabled_hover.png"/>${v.version!}'<#else>'<img class="latestVersionHidden" src="${baseURL}/images/dataTables/forward_enabled_hover.png"/><a href="${baseURL}/resource?r=${shortname}&amp;v=${v.version!}">${v.version!}</a>'</#if>,
+              [<#if (version?? && v.version == version.toPlainString()) || (!version?? && v.version == resource.emlVersion.toPlainString())>'<img class="latestVersion" src="${baseURL}/images/dataTables/forward_enabled_hover_red.png"/>${v.version!}'<#else>'<img class="latestVersionHidden" src="${baseURL}/images/dataTables/forward_enabled_hover_red.png"/><a href="${baseURL}/resource?r=${shortname}&amp;v=${v.version!}">${v.version!}</a>'</#if>,
                '${v.released?date}',
                '${v.recordsPublished}',
                <#if v.changeSummary?has_content>"${v.changeSummary?replace("\'", "\\'")?replace("\"", '\\"')}&nbsp;<#if managerRights><a href='${baseURL}/manage/history.do?r=${resource.shortname}&v=${v.version}'><@s.text name='button.edit'/></a></#if>"<#else>"<@s.text name="publishing.changeSummary.default"/>&nbsp;<#if managerRights><a href='${baseURL}/manage/history.do?r=${resource.shortname}&v=${v.version}'><@s.text name='button.edit'/></a></#if>"</#if>,
diff --git a/WEB-INF/pages/manage/home.ftl b/WEB-INF/pages/manage/home.ftl
index f40b06d..48704e4 100644
--- a/WEB-INF/pages/manage/home.ftl
+++ b/WEB-INF/pages/manage/home.ftl
@@ -12,7 +12,7 @@
         initHelp();
     });
 </script>
-  <@resourcesTable shownPublicly=false numResourcesShown=10 sEmptyTable="manage.home.resources.none" columnToSortOn=6 sortOrder="desc"/>
+  <@resourcesTable shownPublicly=false numResourcesShown=999 sEmptyTable="manage.home.resources.none" columnToSortOn=6 sortOrder="desc"/>
 
 <h1 class="rtableTitle"><@s.text name="manage.home.title"/></h1>
 <div id="tableContainer"></div>
diff --git a/WEB-INF/pages/manage/mapping.ftl b/WEB-INF/pages/manage/mapping.ftl
index 289ebb7..7527c53 100644
--- a/WEB-INF/pages/manage/mapping.ftl
+++ b/WEB-INF/pages/manage/mapping.ftl
@@ -91,7 +91,7 @@ $(document).ready(function(){
 	};
   var showAllGroups=${Parameters.showAllGroups!"false"};
   if (!showAllGroups){
-    hideRedundantGroups();
+    //hideRedundantGroups();
   };
 
     $('.confirm').jConfirmAction({question : "<@s.text name="basic.confirm"/>", yesAnswer : "<@s.text name="basic.yes"/>", cancelAnswer : "<@s.text name="basic.no"/>"});
diff --git a/WEB-INF/pages/manage/overview.ftl b/WEB-INF/pages/manage/overview.ftl
index d8e1051..b93b2bd 100644
--- a/WEB-INF/pages/manage/overview.ftl
+++ b/WEB-INF/pages/manage/overview.ftl
@@ -106,7 +106,8 @@ $(document).ready(function(){
   $('.confirmPublishMajorVersionWithoutDOI').jConfirmAction({question : "<@s.text name='manage.overview.publishing.withoutDoi.majorVersion.confirm'/></br></br><@s.text name='manage.overview.publishing.doi.summary'/></br></br><@s.text name='manage.overview.publishing.doi.confirm.end'/>", yesAnswer : "<@s.text name='basic.yes'/>", summary : "<@s.text name='manage.overview.publishing.doi.summary.placeholder'/>", cancelAnswer : "<@s.text name='basic.no'/>"});
 
     var showReport=false;
-	$("#toggleReport").click(function() {
+	$("#toggleReport").click(function(e) {
+	  e.preventDefault();
 		if(showReport){
 			showReport=false;
 			$("#toggleReport").text("<@s.text name='basic.show'/>");
diff --git a/WEB-INF/pages/portal/home.ftl b/WEB-INF/pages/portal/home.ftl
index bc07934..c3f725d 100644
--- a/WEB-INF/pages/portal/home.ftl
+++ b/WEB-INF/pages/portal/home.ftl
@@ -5,14 +5,17 @@
   <#include "/WEB-INF/pages/macros/resourcesTable.ftl"/>
 <script type="text/javascript" language="javascript" src="${baseURL}/js/jquery/jquery-1.11.1.min.js"></script>
 <script type="text/javascript" language="javascript" src="${baseURL}/js/jquery/jquery.dataTables.js"></script>
-  <@resourcesTable shownPublicly=true numResourcesShown=20 sEmptyTable="dataTables.sEmptyTable.resources" columnToSortOn=1 sortOrder="asc" />
+  <@resourcesTable shownPublicly=true numResourcesShown=999 sEmptyTable="dataTables.sEmptyTable.resources" columnToSortOn=1 sortOrder="asc" />
 <h1 class="rtableTitle"><@s.text name="portal.home.title"/></h1>
+
+<p><#if localeLanguage=='fr'>Suivez <a href="http://www.canadensys.net/data-publication-guide?lang=fr">notre guide en 7 étapes</a> pour publier votre propre jeu de données sur ce dépôt.<#else>Follow <a href="http://www.canadensys.net/data-publication-guide">our 7-step guide</a> to publish your own dataset on this repository.</#if></p>
+
 <div id="tableContainer"></div>
 
 <!-- RSS Feed shown if there are resources -->
   <#if (resources?size>0)>
   <p>
-    <@s.text name="portal.home.feed"><@s.param>${baseURL}/rss.do</@s.param></@s.text> <img id="rssImage" src="${baseURL}/images/rss.png"/>.
+    <@s.text name="portal.home.feed"><@s.param>${baseURL}/rss.do</@s.param></@s.text> <img id="rssImage" src="${baseURL}/images/rss.png" alt="RSS"/>.
   </p>
   <#else>
   <p><@s.text name="portal.home.no.public"/></p>
diff --git a/WEB-INF/pages/portal/resource_new.ftl b/WEB-INF/pages/portal/resource_new.ftl
index f8f91cc..17db3a2 100644
--- a/WEB-INF/pages/portal/resource_new.ftl
+++ b/WEB-INF/pages/portal/resource_new.ftl
@@ -105,106 +105,7 @@
   <#assign anchor_rights>#rights</#assign>
   <#assign anchor_citation>#citation</#assign>
 
-<!-- Sidebar -->
-<div id="sidebar-wrapper">
-
-    <ul class="sidebar-nav">
-        <li>
-          <input href="#menu-toggle" class="contract" type="submit" id="menu-toggle" name="submit" alt="expand" value=""/>
-        </li>
-        <li>
-            <a class="sidebar-anchor work" href="#"><@s.text name='portal.resource.summary'/></a>
-        </li>
-        <!-- Dataset must have been published to show versions, downloads, and how to cite sections -->
-        <#if resource.lastPublished??>
-        <li>
-          <a class="sidebar-anchor" href="#downloads"><@s.text name='portal.resource.downloads'/></a>
-        </li>
-        <li>
-            <a class="sidebar-anchor" href="${anchor_versions}"><@s.text name='portal.resource.versions'/></a>
-        </li>
-        <!-- Citation section -->
-        <#if eml.citation?? && (eml.citation.citation?has_content || eml.citation.identifier?has_content)>
-          <li>
-            <a class="sidebar-anchor" href="${anchor_citation}"><@s.text name='portal.resource.cite.howTo'/></a>
-          </li>
-        </#if>
-        <li>
-          <a class="sidebar-anchor" href="${anchor_rights}"><@s.text name='eml.intellectualRights.simple'/></a>
-        </li>
-        <li>
-          <a class="sidebar-anchor" href="#gbif"><@s.text name='portal.resource.organisation.key'/></a>
-        </li>
-      </#if>
-        <!-- Keywords section -->
-        <#if eml.subject?has_content>
-            <li>
-                <a class="sidebar-anchor" href="#keywords"><@s.text name='portal.resource.summary.keywords'/></a>
-            </li>
-        </#if>
-        <!-- External data section -->
-      <#if (eml.physicalData?size > 0 )>
-          <li>
-              <a class="sidebar-anchor" href="#external"><@s.text name='manage.metadata.physical.alternativeTitle'/></a>
-          </li>
-      </#if>
-        <!-- Contacts section -->
-        <#if (eml.contacts?size>0) || (eml.creators?size>0) || (eml.metadataProviders?size>0) || (eml.associatedParties?size>0)>
-          <li>
-            <a class="sidebar-anchor" href="#contacts"><@s.text name='portal.resource.contacts'/></a>
-          </li>
-        </#if>
-        <!-- Geo coverage section -->
-      <#if eml.geospatialCoverages[0]??>
-        <li>
-            <a class="sidebar-anchor" href="#geospatial"><@s.text name='portal.resource.summary.geocoverage'/></a>
-        </li>
-      </#if>
-        <!-- Taxonomic coverage sections -->
-      <#if ((organizedCoverages?size > 0))>
-          <li>
-              <a class="sidebar-anchor" href="#taxanomic"><@s.text name='manage.metadata.taxcoverage.title'/></a>
-          </li>
-      </#if>
-    <!-- Temporal coverages section -->
-  <#if ((eml.temporalCoverages?size > 0))>
-        <li>
-            <a class="sidebar-anchor" href="#temporal"><@s.text name='manage.metadata.tempcoverage.title'/></a>
-        </li>
-  </#if>
-        <!-- Project section -->
-      <#if eml.project?? && eml.project.title?has_content>
-          <li>
-              <a class="sidebar-anchor" href="#project"><@s.text name='manage.metadata.project.title'/></a>
-          </li>
-      </#if>
-        <!-- Sampling methods section -->
-      <#if eml.studyExtent?has_content || eml.sampleDescription?has_content || eml.qualityControl?has_content || (eml.methodSteps?? && (eml.methodSteps?size>=1) && eml.methodSteps[0]?has_content) >
-          <li>
-              <a class="sidebar-anchor" href="#methods"><@s.text name='manage.metadata.methods.title'/></a>
-          </li>
-      </#if>
-        <!-- Collections section -->
-      <#if eml.collections?? && (eml.collections?size > 0) && eml.collections[0].collectionName?has_content >
-          <li>
-              <a class="sidebar-anchor" href="#collection"><@s.text name='manage.metadata.collections.title'/></a>
-          </li>
-      </#if>
-        <!-- bibliographic citations section -->
-      <#if eml.bibliographicCitationSet?? && (eml.bibliographicCitationSet.bibliographicCitations?has_content)>
-          <li>
-              <a class="sidebar-anchor" href="#references"><@s.text name='manage.metadata.citations.bibliography'/></a>
-          </li>
-      </#if>
-        <!-- Additional metadata section -->
-      <#if eml.additionalInfo?has_content || eml.purpose?has_content || (eml.alternateIdentifiers?size > 0 )>
-          <li>
-              <a class="sidebar-anchor" href="#additional"><@s.text name='manage.metadata.additional.title'/></a>
-          </li>
-      </#if>
-    </ul>
-</div>
-<!-- /#sidebar-wrapper -->
+
   <#assign no_description><@s.text name='portal.resource.no.description'/></#assign>
   <#assign updateFrequencyTitle><@s.text name='eml.updateFrequency'/></#assign>
   <#assign publishedOnText><@s.text name='manage.overview.published.released'/></#assign>
@@ -284,24 +185,27 @@
 
                           <#if eml.distributionUrl?has_content || resource.lastPublished??>
                               <ul class="horizontal-list">
-                                <#if eml.distributionUrl?has_content>
-                                  <li class="box"><a href="${eml.distributionUrl}" class="icon icon-homepage"><@s.text name='eml.distributionUrl.short'/></a></li>
-                                </#if>
-                                <#if resource.status=="REGISTERED" && resource.key??>
-                                  <li class="box"><a href="${cfg.portalUrl}/dataset/${resource.key}" class="icon icon-gbif"><@s.text name='portal.resource.gbif.page.short'/></a></li>
-                                </#if>
                                 <#if metadataOnly == false>
-                                  <li class="box"><a href="${download_dwca_url}" class="icon icon-download"><@s.text name='portal.resource.published.dwca'/></a></li>
+                                  <li class="box round big_button"><a href="${download_dwca_url}" id="dwc_archive" class="icon icon-download"><@s.text name='portal.resource.published.dwca'/></a></li>
                                 </#if>
                                 <#if resource.lastPublished??>
-                                  <li class="box"><a href="${download_eml_url}" class="icon icon-download"><@s.text name='portal.resource.published.eml'/></a></li>
-                                  <li class="box"><a href="${download_rtf_url}" class="icon icon-download"><@s.text name='portal.resource.published.rtf'/></a></li>
-                                  <#if resource.versionHistory??>
-                                    <li class="box"><a href="${anchor_versions}" class="icon icon-clock"><@s.text name='portal.resource.versions'/></a></li>
+                                  <li class="box round big_button"><a href="${download_eml_url}" id="eml_file" class="icon icon-download"><@s.text name='portal.resource.published.eml'/></a></li>
+                                  <li class="box round big_button"><a href="${download_rtf_url}" id="rtf_file" class="icon icon-download"><@s.text name='portal.resource.published.rtf'/></a></li>
+                                  <#if eml.physicalData?has_content>
+                                    <#list eml.physicalData as item>
+                                      <#if item.distributionUrl?starts_with('http://data.canadensys.net/explorer/')>
+                                        <li class="box round big_button"><a href="${item.distributionUrl}" id="explorer_link" class="icon icon-canadensys multi_line" onClick="_gaq.push(['_trackEvent', 'GBIF data portal', 'Outbound link', '${resource.shortname}']);"><#if localeLanguage=='fr']Voir données sur Canadensys<#else>Explore this dataset on Canadensys</#if></a></li>
+                                      </#if>
+                                    </#list>
                                   </#if>
-                                  <li class="box"><a href="${anchor_rights}" class="icon icon-key"><@s.text name='eml.intellectualRights.simple'/></a></li>
-                                  <#if eml.citation?? && (eml.citation.citation?has_content || eml.citation.identifier?has_content)>
-                                    <li class="box"><a href="${anchor_citation}" class="icon icon-book"><@s.text name='portal.resource.cite'/></a></li>
+                                  <#if resource.status=="REGISTERED" && resource.key??>
+                                    <li class="box round big_button"><a href="${cfg.portalUrl}/dataset/${resource.key}" id="gbif_link" class="icon icon-gbif"><@s.text name='portal.resource.gbif.page.short'/></a></li>
+                                  </#if>
+                                  <#if eml.citation?has_content && eml.citation.identifier?has_content>
+                                    <#assign doi = eml.citation.identifier?matches(r".*(10[.][0-9]{4,}(?:[.][0-9]+)*/\S+)")>
+                                    <#if doi>
+                                      <p><span class="doi"><a href="http://doi.org/${doi?groups[1]}">doi:${doi?groups[1]}</a></p>
+                                    </#if>
                                   </#if>
                                 </#if>
                               </ul>
diff --git a/images/dataTables/forward_enabled_hover_red.png b/images/dataTables/forward_enabled_hover_red.png
new file mode 100644
index 0000000000000000000000000000000000000000..22cda5b711d40f326bd6a5f6730a48d3c3a7fd39
GIT binary patch
literal 585
zcmV-P0=E5$P)<h;3K|Lk000e1NJLTq000vJ000vR1^@s6a!@wR00006VoOIv0RI60
z0RN!9r;`8x010qNS#tmY3ljhU3ljkVnw%H_000McNliru-wP8CEh6O<`#S&t0oF-G
zK~y-)t(3ou6G0TmKW}%FmE7j;IN@+HYIlW|wsvv|_F7vD7Gft@3l`!Zpn_a!V`FDw
zAu5U<dWRPN06C*x#N>`_c9Y%9PR3>;laOCR9z1r2o%!(nzQ-HUS~IV3m}ATp=JgjM
zBDa>8&nuDBpM&7uMzz`iw8^QVwH{C=spp;WmAbhW#}BWD;l(qDSC#-5kpHzQvF8bZ
zuhiMF(|NG&xc4ttD(gVOoRwK&&Vl2&|NQrQrKK#pa4bnSuCK1%xm2l~G-Yw7)(oI4
z;tn71l{(@pbtTaGxocr~x8^vHp4RI>erH)eT+acUT4bz^Ls`CdG)Zn(^8CiB#l_>6
z_0h^EMN%k4I|~ahYFYaBOOg};AL!W~p9;%dH~$(0pFXx)&o-;oS4!)j2I37jWFqWa
zx%~Y@n!euL-F+YD`5zz#I>3RYYBWr=b^xMcaqpe$zI@YYY}L~A7tjP6Rz^T(fTLkb
zq+2VMo<C`~A8$v|zEQAeL7G5fK>6^5*f8BtYHLTS)^-%t%)c0@1N&y30^M<ACjBQ!
zL_DAjteCF?T1HLBKzie5Rck${%*by7ZF4y_sb(2?8`iVB)ZeQ~Y9@}8br}mV^Hcm6
X;s(yer3Qrd00000NkvXXu0mjfGDrr=

literal 0
HcmV?d00001

diff --git a/images/dataTables/sort_asc_red.png b/images/dataTables/sort_asc_red.png
new file mode 100644
index 0000000000000000000000000000000000000000..44db5a6cd890a6251c3ede87783b8ed19a7ef232
GIT binary patch
literal 266
zcmeAS@N?(olHy`uVBq!ia0vp^!XV7S1|*9D%+3HQwj^(N7a$D;Kb?2i11Zh|kH}&M
z25z8IZed1-S#u<Sg6t)pzOL+d*`!1j^uKA$&jJcf_jGX#u{iy9k~ZI=00GzYu2Wi;
zFvUk66*IV!=zW8MDOiYS+m1+v+ll(A@;eUNTost*InUvXT5_72dbwRuc~PdLo9`i?
zsF`03R-SnHhN<L0<*LB_Woeh#DwsqK7=GXTD_WK|sUez)@yY?yr-zf@HIz-UX1pzM
zW{J=a=GTEMS*j*a6HGt;<iTH6sRsgf2kPzL^2|<@{K6RAFDK&VD?b_NL<Ub+KbLh*
G2~7aKoLN5r

literal 0
HcmV?d00001

diff --git a/images/dataTables/sort_desc_red.png b/images/dataTables/sort_desc_red.png
new file mode 100644
index 0000000000000000000000000000000000000000..fb095c930adb3c4b0f7ed796cb1985687edbb64e
GIT binary patch
literal 273
zcmeAS@N?(olHy`uVBq!ia0vp^!XV7S1|*9D%+3HQwj^(N7a$D;Kb?2i11Zh|kH}&M
z25z8IZed1-S#u<Sg6t)pzOL+d*`!2e<QFqtvjhsw^K@|xu{izqiZ!2Oq5$iI_u{R!
z3A)!3*u_4UzhiP)6tsb1;nj;bn*5fBuW(8FV!kfiMa0kOtc_pVGZl5$7XO9Mntx3G
zdvc#+*#4<HL9dd!ypJ;Nl`*U=+iV$@ai@bf&42z(Wj~DqovC~;o_9Q6ZGU?~%_*kW
zs~Strn|4i^6|tz**2*&J_q17-N$rg1B<?A%3fbIZcuT@I%f~*uFMLy(-mL?QN4^1F
O%HZkh=d#Wzp$Py6l3}6%

literal 0
HcmV?d00001

diff --git a/js/custom.js b/js/custom.js
new file mode 100644
index 0000000..1a6ff39
--- /dev/null
+++ b/js/custom.js
@@ -0,0 +1,18 @@
+/*
+ * This method replaces the function langs from global.js
+ * It is called from menu.ftl
+ */
+function custom_langs(localLanguage,baseUrl) {
+	var location = window.location+'';
+	var request = '?request_locale';
+	if(location.indexOf("request_locale") != -1){
+		location = location.slice(0,location.indexOf("request_locale")-1);
+	}
+	if(location.indexOf("?") != -1){
+		request = '&request_locale';		
+	}
+
+	if (localLanguage == "en") { $("#nav_top").append('| <a href="'+location+request+'=fr">Fran&ccedil;ais</a>'); }
+	else if (localLanguage == "fr") { $("#nav_top").append('| <a href="'+location+request+'=en">English</a>'); }
+
+}
\ No newline at end of file
diff --git a/styles/custom.css b/styles/custom.css
index 355407d..cb5acb0 100644
--- a/styles/custom.css
+++ b/styles/custom.css
@@ -5,32 +5,291 @@
  they can create their own modernizr.js with the desired supported elements. They only have to replace the 'default'
  file with their own.
 */
-a {
-  color: #008959;
+#page{
+  margin:0px;
+  min-height:100%;
+}
+
+Header {
+  height:120px;
+}
+#menu ul li {
+  margin:0px;
+  line-height:1.1em;
+}
+#nav_top{
+  line-height:1.2em;
+}
+#nav_title{
+  line-height:1.25em;
+}
+#nav_portal{
+  line-height:1.3em;
+}
+#section-content{
+  width:100%;
+  padding:0px;
+  margin:36px 0px 90px;
+  font-size: 1.35em;
   font-weight: normal;
+  line-height: 1.5em;
+  text-align: left;
+}
+
+#zone-content-wrapper{
+  margin:0px;
+  padding: 0 36px;
+  min-width:1024px;
+}
+#zone-content{
+  position:relative;
+  font-size:1.35em;
+  font-weight:normal;
+  line-height:1.5em;
+}
+
+/* Messages */
+.errorMessage, .actionMessage, .warnMessage{padding:5px;}
+.errorMessage li, .actionMessage li, .warnMessage li{margin-left:20px;padding-left:5px;}
+p.actionMessage, p.warnMessage, p.errorMessage{padding-left:30px;}
+
+#region-content{width:100%;padding:0px;margin:0px;}
+#region-content h1{color:#22241E;font-size:1.5em;padding:5px 0;}
+#region-content h1 span.superscript{font-size:1em;color:#333;}
+#region-content h1 a.tooltip{font-weight:bold; font-style:italic;}
+#region-content .edit{font-size:20px;}
+#region-content p {line-height:1.35em;}
+#region-menu{display:none;height:0px;}
+#region-content div.resourceOverview div.bodyOverview p{font-size:1em;}
+div.resourceOverview div.bodyOverview{width:auto;}
+div.resourceOverview div.bodyOverview div.details {width:600px;}
+div.resourceOverview div.bodyOverview div.details table th {width:200px;}
+div.resourceOverviewPortal{clear:both;}
+div.resourceOverviewPortal div.title {min-width:190px;}
+div.resourceOverviewPortal div.details {color:#666;}
+div.resourceOverviewPortal div.body th {width:160px;padding-left:0.5em;text-indent:-0.5em;font-weight:normal;}
+#zone-content{margin:0px;margin-bottom:36px;}
+#zone-content .grid_18{
+  margin-right: 336px;
+  width:auto;
+}
+#zone-content .grid_24 .grid_18{
+  margin-right:0px;
+  display:block;
+  float:none;
+}
+#region-content .grid_24{
+  float:none;
+  display:block;
+}
+div#sidebar{
+  margin-top:0px;
+  font-size:0.8em;
+  line-height:1.25em;
+}
+div#sidebar h2{
+  display:none;
+}
+div#sidebar ul{
+  padding:0px;
+}
+div#sidebar ul li {
+  border-bottom: 1px solid #A8A7A5;
+  padding:0px;
+}
+div#sidebar ul li.current {
+  padding-left:0px;
+  background-color: #d3d3d3;
+}
+div#sidebar ul li:last-child {
+    border-bottom: medium none;
+}
+div#sidebar ul li a{
+  display:block;
+  padding:6px 15px;
+}
+div#sidebar ul li a:hover{
+  text-decoration:none;
+  background-color: #d3d3d3;
+}
+div#sidebar ul li.current a {
+  font-weight:normal;
+  background-color:transparent;
+  background-image:url("http://data.canadensys.net/common/images/arrow.png");
+  background-position:3px 3px;
+  background-repeat:no-repeat no-repeat;
+}
+#mappingForm ul.sidebar-nav{
+  display:none;
+}
+div.requiredMapping{
+  background-color:#FFF0F5;
+}
+div.mappingFiler{
+  background-color:#fff;
+}
+#wrapper {
+  padding-right: 336px;
+  padding-left:0px;
+  position:relative;
+}
+#one .horizontal-list {
+  position:absolute;
+  right:0px;
+  top:30px;
+  width:300px;
+  margin-right:10px;
+}
+#one .round{
+  border:1px solid #A8A7A5;
+  border-radius:5px;
+}
+#one .horizontal-list > li {
+  float:none;
+  background-color:#E7E7E7;
+  cursor:pointer;
+  display:block;
+  line-height:48px;
+  padding:0px;
+}
+
+#one .horizontal-list > li a {
+  display:block;
+  font-size:15px;
+  height:48px;
+  line-height:48px;
+  padding:0 63px 0 15px;
+}
+
+#one .horizontal-list > li a.multi_line {
+  height:100%;
+  line-height:22px;
+  min-height:48px;
+}
+
+.horizontal-list .box{
+  margin-bottom:20px;
+}
+
+#side_bar{
+  padding-right:10px;
+}
+span.doi:before {
+    content: "DOI";
+}
+span.doi {
+    background: none repeat scroll 0 0 black;
+    border-color: black;
+    border-radius: 5px;
+    color: white;
+    padding: 4px 0 4px 6px;
+    text-decoration: none;
+    font-size:1em;
+    border:none;
+}
+span.doi a {
+    background: none repeat scroll 0 0 #a82400;
+    border-radius: 0 5px 5px 0;
+    color: white;
+    margin-left: 6px;
+    margin-right:0px;
+    padding: 4px 7px 4px 6px;
+    text-decoration: none;
+    text-transform: lowercase;
+}
+div.third select {
+  max-width:90%;
+  width:85%;
+}
+#rtable_filter{display:none;}
+.dataTables_filter{background-color:transparent;}
+table#rtable thead{background-color:transparent;}
+table#rtable tr{line-height:2em;}
+table.display thead th{color:#A82400;}
+table.display thead th.sorting_disabled{color:#22241E;}
+.sorting_asc, .sorting_desc{box-shadow:none;}
+.sorting_asc{
+  background:url("../images/dataTables/sort_asc_red.png") no-repeat scroll right center transparent;
+}
+.sorting_desc{
+  background:url("../images/dataTables/sort_desc_red.png") no-repeat scroll right center transparent;
+}
+tr.even td.sorting_1{background-color:transparent;}
+#rtable_info{display:none;}
+.paginate_disabled_previous, .paginate_disabled_next{cursor:default;}
+.container_24, .container_24 .grid_18, .container_24 .grid_24{width:auto;}
+.container_24 .suffix_6{padding:0px;width:100%;}
+.container_24 .grid_17{width:100%;}
+.container_24 .pull_6 {left:0px;}
+.container_24 .push_18{position:absolute;right:0px;left:auto;min-width:275px;}
+form.half{
+  width:50%;
+}
+.topForm label {
+    display: block;
+    font-size: 12px;
+    line-height:1.5em;
+    margin-top:10px;
 }
-.green{
-  color: #008959;
+.topForm input {
+  margin:0 0 0 0.5em;
+  width:90%;
 }
-#region-menu nav ul li.current {
-  background-color: #008959;
+.topForm p {margin:0px 20px 20px;}
+.topForm div.right {margin-top:0px; text-align:left;}
+.topForm button{display:block;}
+.topForm div.item:last-child{clear:both;}
+div.item div.right {margin-top:0px;margin-bottom:10px;}
+div.tempo div.right{margin-top:10px;margin-bottom:10px;}
+div.buttons{margin-bottom:20px;}
+div.groupmenu ul li {
+  margin-left: 0;
+  margin-right: 20px;
 }
-#region-content h1 {
-  color: #008959;
+.checkbox div {display:inline;}
+.checkbox input {width:5%;}
+#config div.checkbox{
+  padding-top:0px;
 }
-div.groupmenu ul li a {
-  color: #008959;
+#location>label{
+  display:block;
 }
-table#rtable thead{
-  background-color: #dbf0e8;
+div.item{margin-bottom:10px;}
+div.roles{width:250px;margin-top:15px;}
+div.roles label{font-weight:bold;display:inline;}
+div.halfcolumn a[id*="copyDetails-"], div.halfcolumn a[id*="removeLink-"] { float:none; }
+div.conceptItem{float:none;clear:both;}
+div.groupmenu ul{clear:both;margin-top:0px;}
+div.info{line-height:1.5em;}
+
+.sidebar-nav li a:hover {
+  text-decoration: none;
+  color: #666;
+  background: #dbf0e8;
 }
-.dataTables_filter {
-  background-color: #dbf0e8;
+
+td.separator{
+  border-right:0px;
 }
-tr.even td.sorting_1 {
-  background-color: #E6F5EB;
+#resourcedoi{
+  display:none;
 }
-.actionMessage{
-  color: #008959;
-  background-color: #dbf0e8;
+#zone-footer-wrapper{display:none;height:0px;}
+#section-footer{height:90px;}
+#footer_content{text-align:left;}
+#footer_content div.right{
+  font-size:1em;
+  margin:0px;
+  text-align:left;
+  width:500px;
+ }
+#footer_content ul li{margin:0px;}
+.ui-widget-header{
+  background:-moz-linear-gradient(bottom,#a82400 0,#6a0c00 100%);
+  background:-ms-linear-gradient(bottom,#a82400 0,#6a0c00 100%);
+  background:-o-linear-gradient(bottom,#a82400 0,#6a0c00 100%);
+  background:-webkit-linear-gradient(bottom,#a82400 0,#6a0c00 100%);
+  background:linear-gradient(bottom,#a82400 0,#6a0c00 100%);
+  background-color:#961b00;
+  color:#fff;
 }
diff --git a/styles/main.css b/styles/main.css
index 3706fe6..6e1225e 100644
--- a/styles/main.css
+++ b/styles/main.css
@@ -1313,19 +1313,6 @@ textarea.basic {
   padding-left: 220px;
 }
 
-#sidebar-wrapper {
-  z-index: 1000;
-  position: fixed;
-  width: 0;
-  height: auto;
-  overflow-y: visible;
-  background: #dbf0e8;
-  -webkit-transition: all 0.5s ease;
-  -moz-transition: all 0.5s ease;
-  -o-transition: all 0.5s ease;
-  transition: all 0.5s ease;
-}
-
 #sidebar-wrapper.toggled {
   display: none;
 }
-- 
2.6.1

